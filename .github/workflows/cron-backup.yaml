name: cron/backup
on:
  workflow_dispatch:
  schedule:
    - cron: '30 7 * * 5'

jobs:
  cronjob:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ™ Make Request
        id: req
        uses: fjogeleit/http-request-action@v1
        with:
          url: http://m3.devs.space/cron/backup
          method: GET
          contentType: text/plain
          timeout: 30000
      - name: ðŸ¤² Show Response
        env:
          RES_BODY: ${{ steps.req.outputs.response }}
          RES_HEADERS: ${{ steps.req.outputs.headers }}
        run: |
          echo '### ðŸ“¦ Response body' >> $GITHUB_STEP_SUMMARY
          echo '```' >> $GITHUB_STEP_SUMMARY
          echo "$RES_BODY" >> $GITHUB_STEP_SUMMARY
          echo '```' >> $GITHUB_STEP_SUMMARY
          echo '### ðŸ“‹ Response headers:' >> $GITHUB_STEP_SUMMARY
          echo "    $RES_HEADERS" >> $GITHUB_STEP_SUMMARY
